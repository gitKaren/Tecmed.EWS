@using EWS.Domain.Model;
@model EWS.Domain.Model.Quote

@{
    ViewBag.Title = "Extended Warranty";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section scripts {
    <script type="text/javascript">
    </script>
    <script src="~/Scripts/custom/GetList.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
}

<div class="container-fluid">
    @Html.Partial("ValidationSummary", ViewData.ModelState)
    <h2></h2>
    <div class="row">
        
        <div class="col-xs-12 bottom-gap-20">
            <div class="pull-right pad3">
               
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Quote</h3>                   
                </div>

                <div class="panel-body">


                    @using (Html.BeginForm(MVC.Quote.Quote(), FormMethod.Post, new { role = "form", id = "SearchForm" }))
                    {
                        @Html.HiddenFor(model => model.QuoteID)
                        
                         <div class="row">
                            <div class="col-xs-6">
                                @Html.EditorFor(model => model.Customer)

                                @if (!string.IsNullOrEmpty(Model.QuoteRef))
                                { 
                                <div class="form-group">
                                    @Html.LabelFor(model => model.QuoteRef, htmlAttributes: new { @class = "control-label col-md-4" })
                                    <div class="col-sm-6 col-md-5">
                                        @Html.EditorFor(model => model.QuoteRef, new { htmlAttributes = new { @class = "form-control form-control-greyed text-center", @readonly = "readonly" } })
                                    </div>
                                </div>
                                }

                                <div class="form-group">
                                    @Html.LabelFor(model => model.TenderNumber, htmlAttributes: new { @class = "control-label col-md-4" })
                                    <div class="col-sm-6 col-md-5">
                                        @Html.EditorFor(model => model.TenderNumber, new { htmlAttributes = new { @class = "form-control form-control-greyed text-center", @readonly = "readonly" } })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.VAT, htmlAttributes: new { @class = "control-label col-md-4" })
                                    <div class="col-sm-6  col-md-5">
                                        @Html.EditorFor(model => model.VAT, new { htmlAttributes = new { @class = "form-control form-control-greyed text-right", @readonly = "readonly" } })
                                    </div>  

                                </div>

                                @Html.EditorFor(model => model.ExchangeRate)

                                <div class="form-group">
                                    @Html.LabelFor(model => model.SellingPriceExclVAT, htmlAttributes: new { @class = "control-label col-md-4" })
                                    <div class="col-sm-6 col-md-5">
                                        @Html.EditorFor(model => model.SellingPriceExclVAT, new { htmlAttributes = new { @class = "form-control text-right" } })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.SellingPriceInclVAT, htmlAttributes: new { @class = "control-label col-md-4" })
                                    <div class="col-sm-6  col-md-5">
                                        @Html.EditorFor(model => model.SellingPriceInclVAT, new { htmlAttributes = new { @class = "form-control text-right" } })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.StartDate, htmlAttributes: new { @class = "control-label col-md-4" })
                                    <div class="col-sm-6  col-md-5">
                                        @Html.EditorFor(model => model.StartDate, new { htmlAttributes = new { @class = "form-control text-right" } })
                                    </div>
                                </div>

                                
                            </div>
                            <div class="col-xs-5">
                                <div class="form-group">
                                    @Html.EditorFor(model => model.Device)
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-xs-12" style="text-align:right;">
                                <button id="btnSearch" type="submit" value="Recalculate" class="btn btn-primary throbber" disabled>
                                    Recalc&nbsp;<span class="glyphicon glyphicon-refresh"></span>
                                </button>
                            </div>
                        </div>
                        <br/>
                        <div class="">
                            <div id="Spinner" align="center" class="hidden">
                                <img src="~/Images/Loading.gif" />
                                <b>Fetching results...</b>
                            </div> 
                            <div id="AutoList">  
                                @Html.EditorFor(model => model.ContractCalculations, "ContractCalculations")
                            </div>
                            <div class="panel"></div>
                            <div class="pull-right">

                                <button id="btnSubmit" type="submit" name="Save" value="Save" class="btn btn-primary throbber">
                                    Next&nbsp;<span class="glyphicon glyphicon-step-forward"></span>
                                </button>
                            </div>
                        </div>

                    }
                </div>


            </div>


        </div>
    </div>
</div>